---
import Layout from '../../layouts/Layout.astro';
import Chatbot from '../../components/Chatbot.astro';

// Leemos las variables de entorno como antes.
const n8nHost = import.meta.env.PUBLIC_N8N_HOST;
const n8nWebhookId = import.meta.env.PUBLIC_N8N_WEBHOOK_ID;

const isConfigured = n8nHost && n8nWebhookId;
---

<Layout title="Asistente de Modelo de Negocio">
  <section class="bg-persian-green-900 min-h-screen">
    <div class="container mx-auto px-8 flex flex-col items-center">
      <!-- Renderizado condicional del Chatbot -->
      {
        isConfigured ? (
          // 1. Creamos un contenedor con un tama침o definido (alto y ancho).
          //    El chatbot se renderizar치 para llenar este espacio.
          <div class="mt-16 container">
            {/* 2. Llamamos al componente con mode="embed" */}
            <Chatbot host={n8nHost} webhookId={n8nWebhookId} />
          </div>
        ) : (
          <div class="mt-12 w-full max-w-2xl text-center p-8 bg-red-100 border border-red-400 text-red-700 rounded-lg">
            <h3 class="font-bold text-lg">Error de Configuraci칩n</h3>
            <p class="mt-2">
              El chatbot no se puede mostrar porque las variables de entorno no
              est치n configuradas correctamente.
            </p>
          </div>
        )
      }
    </div>
  </section>
</Layout>
